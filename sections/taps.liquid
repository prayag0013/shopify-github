<div class="tab-container " {{ section.settings.text_alignment }}>
  <div class="tab-navigation">
    {% for block in section.blocks %}
      <button class="tab-button {% if forloop.first %}active{% endif %}" 
              data-tab="{{ block.id }}">
        {{ block.settings.tab_title }}
      </button>
    {% endfor %}
  </div>

  <div class="tab-content-container" >
    {% for block in section.blocks %}
      <div class="tab-content {% if forloop.first %}active{% endif %} " 
           id="{{ block.id }}">
        {{ block.settings.tab_content }}
      </div>
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Custom Tabs",
  "blocks": [
    {
      "type": "tab",
      "name": "Tab",
      "settings": [
        {
          "type": "text",
          "id": "tab_title",
          "label": "Tab Title",
          "default": "Tab"
        },
        {
          "type": "richtext",
          "id": "tab_content",
          "label": "Tab Content"
        },
        {
          "type": "select",
          "id": "text_alignment",
          "label": "Text Aligment",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ]
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Tabs",
      "blocks": [
        {
          "type": "tab"
        }
      ]
    }
  ]
}
{% endschema %}

<style>
.tab-container {
  width: 100%;
  margin: 20px 0;
}

.tab-navigation {
  display: flex;
  flex-direction: column;
  border-right: 1px solid #e0e0e0;
  width: 250px;
  float: left;
}

.tab-button {
  padding: 15px 20px;
  background: none;
  border: none;
  text-align: left;
  cursor: pointer;
  transition: background-color 0.3s;
  color: #333;
}

.tab-button:hover {
  background-color: #f5f5f5;
}

.tab-button.active {
  background-color: #f0f0f0;
  font-weight: bold;
}

.tab-content-container {
  margin-left: 270px;
  min-height: 300px;
}

.tab-content {
  display: none;
  padding: 20px;
}

.tab-content.active {
  display: block;
}

@media screen and (max-width: 768px) {
  .tab-navigation {
    float: none;
    width: 100%;
    border-right: none;
    border-bottom: 1px solid #e0e0e0;
    margin-bottom: 20px;
  }

  .tab-content-container {
    margin-left: 0;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const tabButtons = document.querySelectorAll('.tab-button');
  const tabContents = document.querySelectorAll('.tab-content');

  tabButtons.forEach(button => {
    button.addEventListener('click', () => {
      // Remove active class from all buttons and contents
      tabButtons.forEach(btn => btn.classList.remove('active'));
      tabContents.forEach(content => content.classList.remove('active'));

      // Add active class to clicked button and corresponding content
      button.classList.add('active');
      const tabId = button.getAttribute('data-tab');
      document.getElementById(tabId).classList.add('active');
    });
  });
});
</script>